{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\subWeapon/assets\\script\\subWeapon\\subWeapon2.js"],"names":["cc","Class","extends","Component","properties","m_LeftWind","Sprite","m_RightWind","m_buttle","Node","m_light","onLoad","i","length","pos","convertToWorldSpaceAR","v2","pos1","gGameCtl","m_SubWeaponParent","convertToNodeSpaceAR","parent","addChild","setPosition","active","index","m_bInit","Reset","start","setScale","m_bButtleMove","m_Sleep","begin","seq","sequence","scaleTo","callFunc","target","node","bind","runAction","setStart","resumeAllActions","setStop","pauseAllActions","update","dt","y","x"],"mappings":"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","file":"subWeapon2.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\subWeapon","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        m_LeftWind:cc.Sprite,\r\n        m_RightWind:cc.Sprite,\r\n        m_buttle:[cc.Node],\r\n        m_light:[cc.Node],\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n\r\n        for (var i = 0; i < this.m_buttle.length; i++) {\r\n            var pos = this.m_buttle[i].convertToWorldSpaceAR(cc.v2(0,0));\r\n            var pos1 = gGameCtl.m_SubWeaponParent.convertToNodeSpaceAR(pos)\r\n    \r\n            this.m_buttle[i].parent = null;\r\n            gGameCtl.m_SubWeaponParent.addChild(this.m_buttle[i]);\r\n            this.m_buttle[i].setPosition(pos1);\r\n            \r\n            this.m_light[i].active = false;\r\n            this.m_light[i].index = i;\r\n\r\n        }\r\n        \r\n        this.m_bInit = false;\r\n        this.Reset();\r\n    },\r\n\r\n    start () {\r\n    },\r\n    Reset:function(){\r\n\r\n        this.m_light[0].setScale(cc.v2(0.1,0.1));\r\n        this.m_light[1].setScale(cc.v2(0.1,0.1));\r\n        \r\n        this.m_bButtleMove =false;\r\n        this.m_buttle[0].active = false;\r\n        this.m_buttle[1].active = false;\r\n        this.m_Sleep = false;\r\n    },\r\n    begin:function(){\r\n        for (var i = 0; i < this.m_light.length; i++) {\r\n\r\n            this.m_light[i].active = true;\r\n            this.m_light[i].setScale(cc.v2(0,0));\r\n            var seq = cc.sequence(cc.scaleTo(1,0.5,0.5),cc.callFunc(function(target){\r\n\r\n                var index = target.index;\r\n                this.m_light[index].active = false;\r\n\r\n                var pos = this.m_light[index].convertToWorldSpaceAR(cc.v2(0,0));\r\n                pos = gGameCtl.node.convertToNodeSpaceAR(pos);\r\n                \r\n                this.m_buttle[index].active = true;\r\n                this.m_buttle[index].setPosition(pos);\r\n\r\n                this.m_bButtleMove = true;\r\n\r\n            }.bind(this)))\r\n            this.m_light[i].runAction(seq)\r\n        }\r\n\r\n    },\r\n    setStart:function(){\r\n        if( !this.m_bInit ){\r\n            this.begin();\r\n            this.m_bInit = true;\r\n        }\r\n        this.m_light[0].resumeAllActions();\r\n        this.m_light[1].resumeAllActions();\r\n        this.m_Sleep = false;\r\n    },\r\n    setStop:function(){\r\n        this.m_light[0].pauseAllActions();\r\n        this.m_light[1].pauseAllActions();\r\n        this.m_Sleep  = true;\r\n    },\r\n\r\n    update (dt) {\r\n        if( this.m_bButtleMove && !this.m_Sleep ){\r\n            for (var i = 0; i < this.m_buttle.length; i++) {\r\n                    \r\n                var y = this.m_buttle[i].y;\r\n                var x = this.m_buttle[i].x;\r\n                y += 1000*dt;\r\n                if( i == 0 ){\r\n                    x -= 200*dt;\r\n                }else{\r\n                    x += 200*dt;\r\n                }\r\n\r\n                this.m_buttle[i].y = y;\r\n                this.m_buttle[i].x = x;\r\n                if( this.m_buttle[i].y > 860){\r\n                    this.begin();\r\n                    this.m_bButtleMove = false;\r\n                    this.m_buttle[i].active = false;\r\n                }\r\n                \r\n            }\r\n        }\r\n    },\r\n});\r\n"]}