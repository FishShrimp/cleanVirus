{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\Brief.js"],"names":["cc","Class","extends","Component","properties","m_BG","Node","m_Gold","Label","m_GuangGaoGold","m_BtAdvertising","onLoad","window","gBrief","node","active","start","onShowView","hp","func","gAirPlane","EndFire","gGameCtl","onBulletKilledAll","gVirusHpView","Brief","gVirusMake","unsleepVirus","playAirPlaneDieAnim","getPosition","gold","goldCrarryBit","GetGold","gold1","string","x","runAction","fadeTo","fadeIn","bind","gLevelDesignCtl","NextLevel","onHideView","onClickGuangGao","MoveOutScreen","gAdvertising","onShow","BriefData","onClickGetGold","opacity","onVirusKilledAll","Action","ACTION_RESET","ACTION_MOVE_IN","ACTION_PLAY","GameReset","createGoldAnim","v2","m_Top","getGoldNode","Reset","gDataCtl","AddGold","updateData"],"mappings":"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","file":"Brief.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        m_BG:cc.Node,\r\n        m_Gold:cc.Label,\r\n        m_GuangGaoGold:cc.Label,\r\n        m_BtAdvertising:cc.Node\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        window.gBrief = this;\r\n        this.node.active = false;\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n    onShowView:function(hp){\r\n        if(this.node.active)return;\r\n\r\n        var func = function(){\r\n            gAirPlane.EndFire();\r\n            gGameCtl.onBulletKilledAll();\r\n            // gAirPlane.DieEnd();\r\n            gVirusHpView.Brief();\r\n            gVirusMake.unsleepVirus();\r\n            gGameCtl.playAirPlaneDieAnim(this.node.getPosition());\r\n    \r\n            var gold = goldCrarryBit(gVirusHpView.GetGold());\r\n            var gold1 = goldCrarryBit(gVirusHpView.GetGold()*10);\r\n    \r\n            this.m_Gold.string = ''+gold;\r\n            this.m_GuangGaoGold.string = ''+gold1;\r\n            this.node.active = true;\r\n            this.node.x = 0;\r\n    \r\n            this.m_BG.runAction(cc.fadeTo(1.5,130));\r\n            this.node.runAction(cc.fadeIn(1.5));\r\n    \r\n            this.m_BtAdvertising.active = gVirusHpView.GetGold()>0;\r\n        }.bind(this)\r\n        if( hp == 0){\r\n            gLevelDesignCtl.Brief(function(){\r\n                gLevelDesignCtl.NextLevel(function(){\r\n                    func();\r\n                });\r\n            }.bind(this));\r\n        }\r\n        else{\r\n            func();\r\n        }\r\n    },\r\n    onHideView:function(){\r\n        this.node.active = false;\r\n    },\r\n    onClickGuangGao:function(){\r\n\r\n        gAirPlane.MoveOutScreen();\r\n        this.onHideView();\r\n        gAdvertising.onShow(function(){\r\n            var gold = gVirusHpView.GetGold();\r\n            this.BriefData(gold*10);\r\n        }.bind(this));\r\n    },\r\n\r\n    onClickGetGold:function(){\r\n        var gold = gVirusHpView.GetGold();\r\n        this.onHideView();\r\n        this.BriefData(gold);\r\n    },\r\n    BriefData:function(gold){\r\n\r\n        gAirPlane.MoveOutScreen();\r\n        gVirusHpView.node.opacity = 0;\r\n        gVirusMake.onVirusKilledAll();\r\n        gGameCtl.Action(ACTION_RESET);\r\n        gGameCtl.Action(ACTION_MOVE_IN);\r\n        gGameCtl.Action(ACTION_PLAY);\r\n\r\n        gGameCtl.GameReset();\r\n        \r\n        if( gold == 0)return;\r\n        \r\n        gGameCtl.createGoldAnim(cc.v2(-178,-87),\r\n        cc.v2(-383,733),\r\n        gGameCtl.m_Top.getGoldNode(),\r\n        150,8,\r\n        gold,\r\n        function(gold){\r\n            gVirusHpView.Reset();\r\n            gDataCtl.AddGold(gold);\r\n            gGameCtl.m_Top.updateData();\r\n        }.bind(this)\r\n        );\r\n    }\r\n    // update (dt) {},\r\n});\r\n"]}