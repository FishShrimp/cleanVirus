{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\TouchControl.js"],"names":["cc","Class","extends","Component","properties","m_BG","Node","ctor","m_isCanTouchMove","m_isPlaying","m_canTouch","onLoad","window","gTouchCtl","node","on","EventType","TOUCH_START","TouchStart","bind","TOUCH_MOVE","TouchMove","TOUCH_END","TouchEnd","TOUCH_CANCEL","Reset","setCanTouch","BeginFireCallBack","gAirPlane","BeginFire","event","target","log","stopAllActions","runAction","fadeOut","gVirusMake","unsleepVirus","gGameCtl","Action","ACTION_MOVE_OUT","pos","getDelta","moveAirPlane","fadeIn","unschedule","EndFire","sleepVirus","start","can"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,cAAKL,GAAGM;AADA,KAHP;;AAOL;AACAC,UAAK,gBAAU;AACX,aAAKC,gBAAL;AACA,aAAKC,WAAL;AACA,aAAKC,UAAL,GAAkB,IAAlB;AACH,KAZI;AAaLC,UAbK,oBAaK;AACNC,eAAOC,SAAP,GAAmB,IAAnB;AACA,aAAKC,IAAL,CAAUC,EAAV,CAAaf,GAAGM,IAAH,CAAQU,SAAR,CAAkBC,WAA/B,EAA4C,KAAKC,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAA5C,EAAwE,IAAxE;AACA,aAAKL,IAAL,CAAUC,EAAV,CAAaf,GAAGM,IAAH,CAAQU,SAAR,CAAkBI,UAA/B,EAA2C,KAAKC,SAAL,CAAeF,IAAf,CAAoB,IAApB,CAA3C,EAAsE,IAAtE;AACA,aAAKL,IAAL,CAAUC,EAAV,CAAaf,GAAGM,IAAH,CAAQU,SAAR,CAAkBM,SAA/B,EAA0C,KAAKC,QAAL,CAAcJ,IAAd,CAAmB,IAAnB,CAA1C,EAAoE,IAApE;AACA,aAAKL,IAAL,CAAUC,EAAV,CAAaf,GAAGM,IAAH,CAAQU,SAAR,CAAkBQ,YAA/B,EAA6C,KAAKD,QAAL,CAAcJ,IAAd,CAAmB,IAAnB,CAA7C,EAAuE,IAAvE;AACA,aAAKX,gBAAL,GAAwB,KAAxB;AACA,aAAKC,WAAL,GAAmB,KAAnB;AACH,KArBI;;AAsBLgB,WAAM,iBAAU;AACZ,aAAKhB,WAAL,GAAmB,KAAnB;AACA,aAAKiB,WAAL,CAAiB,IAAjB;AAEH,KA1BI;AA2BLC,uBAAkB,6BAAU;AACxBC,kBAAUC,SAAV;AACH,KA7BI;;AA+BLX,gBAAW,oBAASY,KAAT,EAAeC,MAAf,EAAsB;AAC7B,YAAG,CAAC,KAAKrB,UAAT,EAAqB;AACrBV,WAAGgC,GAAH,CAAO,YAAP;AACA,aAAK3B,IAAL,CAAU4B,cAAV;AACA,aAAK5B,IAAL,CAAU6B,SAAV,CAAoBlC,GAAGmC,OAAH,CAAW,GAAX,CAApB;;AAEA,aAAK3B,gBAAL,GAAwB,IAAxB;AACAoB,kBAAUd,IAAV,CAAemB,cAAf;AACAL,kBAAUC,SAAV;AACAO,mBAAWC,YAAX;;AAEA,YAAI,KAAK5B,WAAT,EAAsB;AAClB;AACH;AACD,aAAKA,WAAL,GAAmB,IAAnB;AACA6B,iBAASC,MAAT,CAAgBC,eAAhB;AAEH,KAhDI;AAiDLnB,eAAU,mBAASS,KAAT,EAAeC,MAAf,EAAsB;;AAE5B,YAAG,CAAC,KAAKrB,UAAT,EAAqB;AACrB,YAAG,CAAC,KAAKF,gBAAT,EAA0B;AACtB;AACH;AACD;AACA;AACA,YAAIiC,MAAMX,MAAMY,QAAN,EAAV;AACAJ,iBAASK,YAAT,CAAsBF,GAAtB;AACH,KA3DI;AA4DLlB,cAAS,kBAASO,KAAT,EAAeC,MAAf,EAAsB;AAC3B,YAAG,CAAC,KAAKrB,UAAT,EAAqB;AACrBV,WAAGgC,GAAH,CAAO,UAAP;;AAEA,aAAK3B,IAAL,CAAU4B,cAAV;AACA,aAAK5B,IAAL,CAAU6B,SAAV,CAAoBlC,GAAG4C,MAAH,CAAU,GAAV,CAApB;;AAGA,aAAKC,UAAL,CAAgB,KAAKlB,iBAArB;AACAC,kBAAUkB,OAAV;AACAV,mBAAWW,UAAX;AAEH,KAxEI;AAyELC,SAzEK,mBAyEI,CAER,CA3EI;;AA4ELtB,iBAAY,qBAASuB,GAAT,EAAa;AACrB,aAAKvC,UAAL,GAAkBuC,GAAlB;AACH;;AAED;AAhFK,CAAT","file":"TouchControl.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        m_BG:cc.Node,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    ctor:function(){\r\n        this.m_isCanTouchMove;\r\n        this.m_isPlaying;\r\n        this.m_canTouch = true;\r\n    },\r\n    onLoad () {\r\n        window.gTouchCtl = this;\r\n        this.node.on(cc.Node.EventType.TOUCH_START, this.TouchStart.bind(this), this);\r\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, this.TouchMove.bind(this), this);\r\n        this.node.on(cc.Node.EventType.TOUCH_END, this.TouchEnd.bind(this), this);\r\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, this.TouchEnd.bind(this), this);\r\n        this.m_isCanTouchMove = false;\r\n        this.m_isPlaying = false;\r\n    },\r\n    Reset:function(){\r\n        this.m_isPlaying = false;\r\n        this.setCanTouch(true);\r\n\r\n    },\r\n    BeginFireCallBack:function(){\r\n        gAirPlane.BeginFire();\r\n    },\r\n\r\n    TouchStart:function(event,target){\r\n        if(!this.m_canTouch )return;\r\n        cc.log('TouchStart');\r\n        this.m_BG.stopAllActions();\r\n        this.m_BG.runAction(cc.fadeOut(0.5));\r\n        \r\n        this.m_isCanTouchMove = true;\r\n        gAirPlane.node.stopAllActions();\r\n        gAirPlane.BeginFire();\r\n        gVirusMake.unsleepVirus();\r\n\r\n        if( this.m_isPlaying ){\r\n            return;\r\n        }\r\n        this.m_isPlaying = true;\r\n        gGameCtl.Action(ACTION_MOVE_OUT);\r\n\r\n    },\r\n    TouchMove:function(event,target){\r\n\r\n        if(!this.m_canTouch )return;\r\n        if(!this.m_isCanTouchMove){\r\n            return;\r\n        }\r\n        //;\r\n        // cc.log('TouchMove');\r\n        var pos = event.getDelta();\r\n        gGameCtl.moveAirPlane(pos);\r\n    },\r\n    TouchEnd:function(event,target){\r\n        if(!this.m_canTouch )return;\r\n        cc.log('TouchEnd');\r\n        \r\n        this.m_BG.stopAllActions();\r\n        this.m_BG.runAction(cc.fadeIn(0.5));\r\n       \r\n\r\n        this.unschedule(this.BeginFireCallBack);\r\n        gAirPlane.EndFire();\r\n        gVirusMake.sleepVirus();\r\n        \r\n    },\r\n    start () {\r\n\r\n    },\r\n    setCanTouch:function(can){\r\n        this.m_canTouch = can;\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}