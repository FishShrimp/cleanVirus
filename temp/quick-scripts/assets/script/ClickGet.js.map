{"version":3,"sources":["ClickGet.js"],"names":["cc","Class","extends","Component","properties","m_labGold","Label","m_progress","ProgressBar","onLoad","updateData","Reset","Play","MoveOut","node","runAction","moveTo","v2","easing","easeBackOut","MoveIn","easeBackIn","onClickGet","target","data","log","gDataCtl","GetTaskGold","gGameCtl","createGoldAnim","getPosition","m_Top","getGoldNode","gold","AddGold","bind","ClearTaskGold","string","goldCrarryBit","update","dt","time","GetGoldAddTime","dis","progress","GetAwardGold","AddTaskGold","save"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,mBAAUL,GAAGM,KADL;AAERC,oBAAWP,GAAGQ;AAFN,KAHP;;AAQL;;AAEAC,UAVK,oBAUK;AACN,aAAKC,UAAL;AACH,KAZI;AAcLC,SAdK,mBAcE,CAEN,CAhBI;AAiBLC,QAjBK,kBAiBC,CAEL,CAnBI;;AAoBLC,aAAQ,mBAAU;AACd,aAAKC,IAAL,CAAUC,SAAV,CAAoBf,GAAGgB,MAAH,CAAU,GAAV,EAAchB,GAAGiB,EAAH,CAAM,GAAN,EAAU,CAAV,CAAd,EAA4BC,MAA5B,CAAmClB,GAAGmB,WAAH,EAAnC,CAApB;AACH,KAtBI;AAuBLC,YAAO,kBAAU;;AAEb,aAAKN,IAAL,CAAUC,SAAV,CAAoBf,GAAGgB,MAAH,CAAU,GAAV,EAAchB,GAAGiB,EAAH,CAAM,GAAN,EAAU,CAAV,CAAd,EAA4BC,MAA5B,CAAmClB,GAAGqB,UAAH,EAAnC,CAApB;AACH,KA1BI;;AA4BLC,gBAAW,oBAASC,MAAT,EAAgBC,IAAhB,EAAqB;AAC5BxB,WAAGyB,GAAH,CAAO,MAAP;AACA,YAAIC,SAASC,WAAT,MAA0B,CAA9B,EAAiC;AACjCC,iBAASC,cAAT,CAAwB,KAAKf,IAAL,CAAUgB,WAAV,EAAxB,EACA9B,GAAGiB,EAAH,CAAM,CAAC,GAAP,EAAW,GAAX,CADA,EAEAW,SAASG,KAAT,CAAeC,WAAf,EAFA,EAGA,GAHA,EAGI,EAHJ,EAIAN,SAASC,WAAT,EAJA,EAKA,UAASM,IAAT,EAAc;AACVP,qBAASQ,OAAT,CAAiBD,IAAjB;AACAL,qBAASG,KAAT,CAAerB,UAAf;AACH,SAHD,CAGEyB,IAHF,CAGO,IAHP,CALA;AAUAT,iBAASU,aAAT;AACA,aAAK1B,UAAL;AACH,KA3CI;;AA6CLA,gBAAW,sBAAU;AACjB,aAAKL,SAAL,CAAegC,MAAf,GAAwBC,cAAcZ,SAASC,WAAT,EAAd,CAAxB;AACH,KA/CI;AAgDLY,UAhDK,kBAgDGC,EAhDH,EAgDO;AACR,YAAIC,OAAOf,SAASgB,cAAT,EAAX;AACA,YAAIC,MAAM,IAAEF,IAAZ;AACAE,eAAOH,EAAP;AACA,aAAKjC,UAAL,CAAgBqC,QAAhB,IAA4BD,GAA5B;AACA,YAAI,KAAKpC,UAAL,CAAgBqC,QAAhB,IAA4B,CAAhC,EAAkC;AAC9B,iBAAKrC,UAAL,CAAgBqC,QAAhB,GAA2B,CAA3B;AACA,gBAAIX,OAAOP,SAASmB,YAAT,EAAX;AACAnB,qBAASoB,WAAT,CAAqBb,IAArB;AACAP,qBAASqB,IAAT;AACA,iBAAKrC,UAAL;AACH;AACJ;AA5DI,CAAT","file":"ClickGet.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        m_labGold:cc.Label,\r\n        m_progress:cc.ProgressBar,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.updateData();\r\n    },\r\n\r\n    Reset(){\r\n\r\n    },\r\n    Play(){\r\n\r\n    },\r\n    MoveOut:function(){\r\n        this.node.runAction(cc.moveTo(0.5,cc.v2(552,0)).easing(cc.easeBackOut()));\r\n    },\r\n    MoveIn:function(){\r\n\r\n        this.node.runAction(cc.moveTo(0.5,cc.v2(383,0)).easing(cc.easeBackIn()));\r\n    },\r\n\r\n    onClickGet:function(target,data){\r\n        cc.log('获取金币');\r\n        if( gDataCtl.GetTaskGold() <= 0 )return;\r\n        gGameCtl.createGoldAnim(this.node.getPosition(),\r\n        cc.v2(-383,733),\r\n        gGameCtl.m_Top.getGoldNode(),\r\n        300,15,\r\n        gDataCtl.GetTaskGold(),\r\n        function(gold){\r\n            gDataCtl.AddGold(gold);\r\n            gGameCtl.m_Top.updateData();\r\n        }.bind(this)\r\n        );\r\n        gDataCtl.ClearTaskGold();\r\n        this.updateData();\r\n    },\r\n    \r\n    updateData:function(){\r\n        this.m_labGold.string = goldCrarryBit(gDataCtl.GetTaskGold());\r\n    },\r\n    update (dt) {\r\n        var time = gDataCtl.GetGoldAddTime();\r\n        var dis = 1/time;\r\n        dis *= dt;\r\n        this.m_progress.progress += dis;\r\n        if( this.m_progress.progress >= 1){\r\n            this.m_progress.progress = 0;\r\n            var gold = gDataCtl.GetAwardGold();\r\n            gDataCtl.AddTaskGold(gold);\r\n            gDataCtl.save();\r\n            this.updateData();\r\n        }\r\n    },\r\n});\r\n"]}