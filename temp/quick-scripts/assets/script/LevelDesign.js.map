{"version":3,"sources":["LevelDesign.js"],"names":["cc","Class","extends","Component","properties","m_Item","Node","ctor","m_BasePos","Array","onLoad","window","gLevelDesignCtl","i","length","getPosition","SetCurrentLevel","Reset","level","gDataCtl","GetCurLevelDesign","starLevel","setPosition","setScale","v2","opacity","js","getComponent","SetNumber","stopAllActions","Play","NextLevel","callBack","moveTo","out","fadeOut","seq","spawn","runAction","PlayShowPointIndex","scale","scaleTo","_in","fadeIn","dly","delayTime","nodeSeq","sequence","callFunc","AddCurLevelDesign","bind","node","MoveOut","spa","easing","easeBackIn","MoveIn","easeBackOut","Brief"],"mappings":"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","file":"LevelDesign.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        m_Item:[cc.Node],\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    ctor:function(){\r\n        this.m_BasePos = new Array();\r\n    },\r\n    onLoad () {\r\n        window.gLevelDesignCtl = this;\r\n        for (var i = 0; i < this.m_Item.length; i++) {\r\n            this.m_BasePos[i] = this.m_Item[i].getPosition();\r\n        }\r\n    },\r\n    SetCurrentLevel:function(){\r\n\r\n    },\r\n    Reset:function(){\r\n        var level = gDataCtl.GetCurLevelDesign();\r\n        var starLevel = level - 2;\r\n        for (var i = 0; i < this.m_Item.length; i++) {\r\n            if(this.m_BasePos[i] != null ){\r\n                this.m_Item[i].setPosition(this.m_BasePos[i]);\r\n            }\r\n            this.m_Item[i].setScale(cc.v2(0.6,0.6));\r\n            this.m_Item[i].opacity = 255;\r\n            var js = this.m_Item[i].getComponent('LevelItem');\r\n            js.SetNumber(starLevel+i);\r\n\r\n            this.m_Item[i].stopAllActions();\r\n        }\r\n        this.m_Item[2].setScale(cc.v2(1,1));\r\n        this.m_Item[0].opacity = 0;\r\n        this.m_Item[4].opacity = 0;\r\n    },\r\n    Play:function(){\r\n    },\r\n    NextLevel:function(callBack){\r\n        for (var i = 1; i < this.m_Item.length; i++) {\r\n            var moveTo = cc.moveTo(0.5,cc.v2(this.m_BasePos[i-1]));\r\n            \r\n            var js = this.m_Item[i].getComponent('LevelItem');\r\n            if( i == 1){\r\n                var out = cc.fadeOut(0.5);\r\n                var seq = cc.spawn(out,moveTo);\r\n                this.m_Item[i].runAction(seq);\r\n                js.PlayShowPointIndex(-1);\r\n\r\n            }else if( i == 2 ){\r\n                var scale = cc.scaleTo(0.5,0.6);\r\n                var seq = cc.spawn(scale,moveTo);\r\n                this.m_Item[i].runAction(seq);\r\n                js.PlayShowPointIndex(0);\r\n\r\n            }else if(i == 3 ){\r\n                var scale = cc.scaleTo(0.5,1);\r\n                var seq = cc.spawn(scale,moveTo);\r\n                this.m_Item[i].runAction(seq);\r\n                js.PlayShowPointIndex(1);\r\n            } else if( i == 4 ){\r\n                var _in = cc.fadeIn(0.5);\r\n                var seq = cc.spawn(_in,moveTo);\r\n                this.m_Item[i].runAction(seq);\r\n                js.PlayShowPointIndex(-1);\r\n            }\r\n            else{\r\n                this.m_Item[i].runAction(moveTo);\r\n            }\r\n        }\r\n        var dly = cc.delayTime(0.5);\r\n        var nodeSeq = cc.sequence(dly,cc.callFunc(\r\n            function(){\r\n                var level = gDataCtl.AddCurLevelDesign();\r\n                this.Reset();\r\n                if(callBack!= null) callBack();\r\n            }.bind(this)\r\n        ));\r\n        this.node.runAction(nodeSeq);\r\n    },\r\n    MoveOut:function(){\r\n        this.Reset();\r\n        var moveTo = cc.moveTo(0.5,cc.v2(0,668));\r\n        var scaleTo = cc.scaleTo(0.5,0.4,0.4);\r\n        var spa = cc.spawn(scaleTo,moveTo);\r\n        this.node.runAction(spa.easing(cc.easeBackIn()));\r\n    },\r\n    MoveIn:function(){\r\n\r\n        var moveTo = cc.moveTo(0.5,cc.v2(0,167));\r\n        var scaleTo = cc.scaleTo(0.5,1,1);\r\n        var spa = cc.spawn(scaleTo,moveTo);\r\n        this.node.runAction(spa.easing(cc.easeBackOut()));\r\n    },\r\n    Brief:function(callBack){\r\n        var moveTo = cc.moveTo(0.5,cc.v2(0,415));\r\n        var scaleTo = cc.scaleTo(0.5,1,1);\r\n        var spa = cc.spawn(scaleTo,moveTo);\r\n        var seq = cc.sequence(spa,cc.callFunc(callBack));\r\n        this.node.runAction(seq.easing(cc.easeBackIn()));\r\n    }       \r\n    // update (dt) {},\r\n});\r\n"]}