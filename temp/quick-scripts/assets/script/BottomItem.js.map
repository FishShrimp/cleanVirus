{"version":3,"sources":["BottomItem.js"],"names":["cc","Class","extends","Component","properties","m_Name","Label","m_Value","m_Gold","m_Button","Button","m_CoinSprite","Node","ctor","m_NameData","m_nValue","m_nLevel","onLoad","init","state","m_State","GetLevel","onUpdate","gDataCtl","GetWeaponSpeed","GetWeaponFire","GetSubWeaponSpeed","GetSubWeaponFire","GetGoldWeaponSpeed","GetGoldWeaponFire","AddLevel","AddWeapoSpeed","AddWeapoFire","AddSubWeapoSpeed","AddSubWeapoFire","AddGoldWeapoSpeed","AddGoldWeapoFire","GetGold","GetWeaponUpSpeedMoney","GetWeaponUpFireMoney","GetValue","GetWeaponSpeedValue","GetWeaponFireValue","GetMaxLevel","GetWeaponSpeedMax","GetWeaponFireMax","string","goldCrarryBit","level","interactable","node","color","Color","upgold","havegold","onBtUp","gold","SubGold","gTop","updateData"],"mappings":"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","file":"BottomItem.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        m_Name:cc.Label,\r\n        m_Value:cc.Label,\r\n        m_Gold:cc.Label,\r\n        m_Button:cc.Button,\r\n        m_CoinSprite:cc.Node,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    ctor:function(){\r\n        this.m_NameData=[\r\n            '射速',\r\n            '火力',\r\n            '强度',\r\n            '火力',\r\n            '金币价值',\r\n            '日常收益'\r\n        ]\r\n        this.m_nValue = 1;\r\n        this.m_nLevel = 1;\r\n    },\r\n    onLoad () {\r\n\r\n    },\r\n\r\n    init:function( state ){\r\n        this.m_State = state;\r\n        this.m_nLevel = this.GetLevel();\r\n        this.onUpdate();\r\n    },\r\n    GetLevel:function(){\r\n        if( this.m_State == 0 ){\r\n            return gDataCtl.GetWeaponSpeed();\r\n        }else if( this.m_State == 1 ){\r\n            return gDataCtl.GetWeaponFire();\r\n        }else if( this.m_State == 2 ){\r\n            return gDataCtl.GetSubWeaponSpeed();\r\n        }else if( this.m_State == 3 ){\r\n            return gDataCtl.GetSubWeaponFire();\r\n        }else if( this.m_State == 4){\r\n            return gDataCtl.GetGoldWeaponSpeed();\r\n        }else if( this.m_State == 5 ){\r\n            return gDataCtl.GetGoldWeaponFire();\r\n        }\r\n    },\r\n    AddLevel:function(){\r\n        if( this.m_State == 0 ){\r\n            return gDataCtl.AddWeapoSpeed();\r\n        }else if( this.m_State == 1 ){\r\n            return gDataCtl.AddWeapoFire();\r\n        }else if( this.m_State == 2 ){\r\n            return gDataCtl.AddSubWeapoSpeed();\r\n        }else if( this.m_State == 3 ){\r\n            return gDataCtl.AddSubWeapoFire();\r\n        \r\n        }else if( this.m_State == 4 ){\r\n            return gDataCtl.AddGoldWeapoSpeed();\r\n        }else if( this.m_State == 5){\r\n            return gDataCtl.AddGoldWeapoFire();\r\n        }\r\n    },\r\n    GetGold:function(){\r\n        if( this.m_State == 0 ){\r\n            return gDataCtl.GetWeaponUpSpeedMoney();\r\n        }else if( this.m_State == 1 ){\r\n            return gDataCtl.GetWeaponUpFireMoney();\r\n        }else{\r\n            return 1;\r\n        }\r\n\r\n    },\r\n    GetValue:function(){\r\n        \r\n        if( this.m_State == 0 ){\r\n            return gDataCtl.GetWeaponSpeedValue();\r\n        }else if( this.m_State == 1 ){\r\n            return gDataCtl.GetWeaponFireValue();\r\n        }\r\n        return 1;\r\n    },\r\n    GetMaxLevel:function(){\r\n        \r\n        if( this.m_State == 0 ){\r\n            return gDataCtl.GetWeaponSpeedMax();\r\n        }\r\n        else if( this.m_State == 1 ){\r\n            return gDataCtl.GetWeaponFireMax();\r\n            \r\n        }else{\r\n            return 1;\r\n        }\r\n    },\r\n    onUpdate:function(){\r\n        this.m_Name.string = this.m_NameData[this.m_State] + '['+this.m_nLevel+']';\r\n        this.m_Value.string = ''+this.GetValue();\r\n\r\n        this.m_Gold.string = ''+goldCrarryBit(this.GetGold());\r\n\r\n        var level = this.GetLevel();\r\n\r\n        this.m_Button.interactable = true;\r\n        this.m_Value.node.color = new cc.Color(255,255,255);\r\n        this.m_CoinSprite.color = new cc.Color(255,255,255);\r\n        this.m_Gold.node.color = new cc.Color(255,255,255);\r\n        if( level != this.GetMaxLevel() ){\r\n\r\n            var upgold = this.GetGold();\r\n            var havegold = gDataCtl.GetGold();\r\n    \r\n            if( havegold < upgold ){\r\n                this.m_Button.interactable = false;\r\n                this.m_Value.node.color = new cc.Color(255,0,0);\r\n                \r\n                this.m_CoinSprite.color = new cc.Color(127,127,127);\r\n                this.m_Gold.node.color = new cc.Color(127,127,127);\r\n            }\r\n        }else{\r\n            this.m_Gold.string = \"MAX\";\r\n            this.m_Button.interactable = false;\r\n            this.m_Value.node.color = new cc.Color(255,0,0);\r\n            this.m_CoinSprite.color = new cc.Color(127,127,127);\r\n            this.m_Gold.node.color = new cc.Color(127,127,127);\r\n        }\r\n\r\n\r\n    },\r\n\r\n    \r\n    onBtUp:function(){\r\n        \r\n        if( this.GetLevel() == this.GetMaxLevel() ){\r\n            return;\r\n        }\r\n        var gold = gDataCtl.GetGold();\r\n        var upgold = this.GetGold();\r\n        if( gold >= upgold){\r\n\r\n            gDataCtl.SubGold(upgold);\r\n            this.m_nLevel = this.AddLevel();\r\n    \r\n            this.onUpdate();\r\n            gTop.updateData();\r\n        }\r\n    },\r\n\r\n\r\n    // update (dt) {},\r\n});\r\n"]}