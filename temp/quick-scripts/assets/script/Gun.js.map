{"version":3,"sources":["Gun.js"],"names":["cc","Class","extends","Component","properties","m_Light","Node","ctor","m_ButtleCount","onLoad","seq","sequence","scaleTo","runAction","repeatForever","active","FireValue","level","gDataCtl","GetWeaponSpeed","maxValue","m_WeaponSpeed","length","i","start","createCallBack","count","GetWeaponFire","gGameCtl","createBullet","parseInt","BeginFire","speed","GetWeaponSpeedService","schedule","EndFire","unschedule","SetBulletCount","ClearAllBullet"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,iBAAQL,GAAGM;AADH,KAHP;;AAOL;;AAEAC,UAAK,gBAAU;AACX,aAAKC,aAAL,GAAqB,EAArB;AACH,KAXI;AAYLC,UAZK,oBAYK;;AAEN,YAAIC,MAAMV,GAAGW,QAAH,CACNX,GAAGY,OAAH,CAAW,GAAX,EAAe,CAAf,EAAiB,CAAjB,CADM,EAENZ,GAAGY,OAAH,CAAW,GAAX,EAAe,CAAf,EAAiB,CAAjB,CAFM,CAAV;AAIA,aAAKP,OAAL,CAAaQ,SAAb,CAAuBb,GAAGc,aAAH,CAAiBJ,GAAjB,CAAvB;;AAEA,aAAKL,OAAL,CAAaU,MAAb,GAAqB,KAArB;;AAEA,aAAKC,SAAL,GAAiB,CAAjB;AACA,YAAIC,QAAQC,SAASC,cAAT,EAAZ;AACA,YAAIC,WAAWF,SAASG,aAAT,CAAuBC,MAAtC;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIN,KAAJ,IAAaM,IAAIH,QAAjC,EAA2CG,GAA3C,EAAgD;AAC5C,iBAAKP,SAAL,IAAkBE,SAASG,aAAT,CAAuBE,CAAvB,EAA0B,CAA1B,CAAlB;AACH;AACJ,KA5BI;AA8BLC,SA9BK,mBA8BI,CAER,CAhCI;;AAiCLC,oBAAe,0BAAU;AACrB;AACA,YAAIC,QAAQR,SAASS,aAAT,KAAyB,EAArC;AACA,YAAID,SAAS,CAAb,EAAgB;AACZA,oBAAQ,CAAR;AACH,SAFD,MAEM,IAAGA,SAAS,EAAZ,EAAe;AACjBA,oBAAQ,EAAR;AACH;AACDE,iBAASC,YAAT,CAAsBC,SAASJ,KAAT,CAAtB;AACH,KA1CI;AA2CLK,eAAU,qBAAU;AAChB,aAAK1B,OAAL,CAAaU,MAAb,GAAqB,IAArB;AACA,aAAKU,cAAL;AACA,YAAIO,QAAQd,SAASe,qBAAT,EAAZ;AACA,aAAKC,QAAL,CAAc,KAAKT,cAAnB,EAAkCO,KAAlC;AACH,KAhDI;AAiDLG,aAAQ,mBAAU;AACd,aAAK9B,OAAL,CAAaU,MAAb,GAAqB,KAArB;AACA,aAAKqB,UAAL,CAAgB,KAAKX,cAArB;AACH,KApDI;AAqDLY,oBAAe,wBAASX,KAAT,EAAe;AAC1B,aAAKlB,aAAL,GAAqBkB,KAArB;AACH,KAvDI;AAwDLY,oBAAe,0BAAU,CAExB;AACD;AA3DK,CAAT","file":"Gun.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        m_Light:cc.Node,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    ctor:function(){\r\n        this.m_ButtleCount = 10;\r\n    },\r\n    onLoad () {\r\n        \r\n        var seq = cc.sequence(\r\n            cc.scaleTo(0.1,0,0),\r\n            cc.scaleTo(0.1,1,1)\r\n        );\r\n        this.m_Light.runAction(cc.repeatForever(seq));\r\n\r\n        this.m_Light.active =false;\r\n\r\n        this.FireValue = 0;\r\n        var level = gDataCtl.GetWeaponSpeed();\r\n        var maxValue = gDataCtl.m_WeaponSpeed.length;\r\n        for (var i = 0; i < level && i < maxValue; i++) {\r\n            this.FireValue += gDataCtl.m_WeaponSpeed[i][0];\r\n        }\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n    createCallBack:function(){\r\n        // cc.log('createCallBack');\r\n        var count = gDataCtl.GetWeaponFire()/10;\r\n        if( count <= 1 ){\r\n            count = 1;\r\n        }else if(count >= 30){\r\n            count = 30;\r\n        }\r\n        gGameCtl.createBullet(parseInt(count) );\r\n    },\r\n    BeginFire:function(){\r\n        this.m_Light.active =true;\r\n        this.createCallBack();\r\n        var speed = gDataCtl.GetWeaponSpeedService();\r\n        this.schedule(this.createCallBack,speed);\r\n    },\r\n    EndFire:function(){\r\n        this.m_Light.active =false;\r\n        this.unschedule(this.createCallBack);\r\n    },\r\n    SetBulletCount:function(count){\r\n        this.m_ButtleCount = count;\r\n    },\r\n    ClearAllBullet:function(){\r\n\r\n    }\r\n    // update (dt) {},\r\n});\r\n"]}