{"version":3,"sources":["AirAutoPlay.js"],"names":["cc","Class","extends","Component","properties","m_Light","Node","m_TailLight","m_Gun","m_AirPlaneHead","m_WuDi","m_Body","Sprite","m_texture","SpriteAtlas","m_subWeapon","onLoad","window","gAirPlane","i","length","seq","sequence","delayTime","scaleTo","callFunc","target","setScale","v2","bind","runAction","repeatForever","getComponent","active","node","start","Reset","setLightColor","Color","Play","setPosition","moveTo","seq1","MoveOut","stopAllActions","onCollisionEnter","other","self","tag","js","id","m_bDie","gTouchCtl","setCanTouch","EndFire","gVirusMake","sleepVirus","gGameCtl","sleepBullet","dieBegin","director","getCollisionManager","enabled","tintTo","repeat","scheduleOnce","gResurgenceView","onShowView","color","MoveIn","MoveOutScreen","x","BeginFire","playSubWeapon","stopSubWeapon","Resurgence","opacity","fadeTo","DieEnd","MoveTo","time","pos","ChangeAirPlane","index","frame","getSpriteFrame","spriteFrame","setStop","setStart"],"mappings":"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","file":"AirAutoPlay.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        m_Light:[cc.Node],\r\n        m_TailLight:cc.Node,\r\n        m_Gun:cc.Node,\r\n        m_AirPlaneHead:cc.Node,\r\n        m_WuDi:cc.Node,\r\n        m_Body:cc.Sprite,\r\n        m_texture:cc.SpriteAtlas,\r\n        m_subWeapon:[cc.Node],\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        window.gAirPlane = this;\r\n        for (var i = 0; i < this.m_Light.length; i++) {\r\n                \r\n            var seq = cc.sequence(\r\n                cc.delayTime(i*0.2),\r\n                cc.scaleTo(0.4,1,1),\r\n                cc.callFunc(function(target){\r\n                    target.setScale(cc.v2(0,0));\r\n                }.bind(this)),\r\n                \r\n                cc.delayTime(0.5),\r\n                );\r\n            this.m_Light[i].runAction(cc.repeatForever(seq));\r\n                \r\n        }\r\n        this.m_Gun = this.m_Gun.getComponent('Gun');\r\n        this.m_WuDi.active = false; \r\n        \r\n        for (var i = 0; i < this.m_subWeapon.length; i++) {\r\n            this.m_subWeapon[i] = this.m_subWeapon[i].getComponent('subWeapon'+i);\r\n            this.m_subWeapon[i].node.active = false;\r\n        }\r\n        this.m_subWeapon[0].node.active = true;\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    Reset(){\r\n        this.setLightColor(new cc.Color(255,255,255));\r\n        \r\n        for (var i = 0; i < this.m_subWeapon.length; i++) {\r\n            if(this.m_subWeapon[i].Reset){\r\n                this.m_subWeapon[i].Reset();\r\n            }\r\n        }\r\n    },\r\n    Play(){\r\n        this.node.active = true;\r\n        this.node.setPosition(cc.v2(0,-925));\r\n        this.node.setScale(cc.v2(0.8,0.8));\r\n        this.m_TailLight.setScale(cc.v2(1,1));\r\n\r\n        var moveTo = cc.moveTo(1,cc.v2(0,-385));\r\n        var scaleTo = cc.scaleTo(0.5,1,1);\r\n        var seq = cc.sequence(moveTo,scaleTo);\r\n        this.node.runAction(seq);\r\n\r\n        var seq1 = cc.sequence(\r\n            cc.delayTime(1),\r\n            cc.scaleTo(0.5,0.6,0.6),\r\n        );\r\n        this.m_TailLight.runAction(seq1);\r\n\r\n\r\n    },\r\n    MoveOut:function(){\r\n        this.node.stopAllActions();\r\n        var scaleTo = cc.scaleTo(0.5,0.6,0.6);\r\n        this.node.runAction(scaleTo);\r\n\r\n        this.m_TailLight.runAction(cc.scaleTo(0.5,1,1));\r\n    },\r\n    \r\n    onCollisionEnter: function (other,self) {\r\n\r\n        if(this.m_WuDi.active )return;\r\n        if( other.tag < 100 ){\r\n            var js = other.node.getComponent(''+other.node.id);\r\n            if( js != null && js.m_bDie ){\r\n                return;\r\n            }\r\n            gTouchCtl.setCanTouch(false);\r\n            gAirPlane.EndFire();\r\n            gVirusMake.sleepVirus();\r\n            gGameCtl.sleepBullet(0);\r\n            this.dieBegin();\r\n            cc.director.getCollisionManager().enabled = false;\r\n        }\r\n    },\r\n    dieBegin:function(){\r\n        this.setLightColor(new cc.Color(255,100,100));\r\n\r\n        var seq = cc.sequence(\r\n            cc.tintTo(0.2,255,0,0),\r\n            cc.tintTo(0.2,255,255,255),\r\n        );\r\n        \r\n        this.m_AirPlaneHead.runAction(cc.repeat(seq,3));\r\n\r\n        this.scheduleOnce(function(){\r\n            this.setLightColor(new cc.Color(255,255,255));\r\n            // gGameCtl.blackBGAnim(true);\r\n            gResurgenceView.onShowView(true);\r\n        }.bind(this),1.5);\r\n    },\r\n    setLightColor:function(color){\r\n        for (var i = 0; i < this.m_Light.length; i++) {\r\n            this.m_Light[i].color=color;\r\n        }\r\n    },\r\n    MoveIn:function(){\r\n\r\n        this.node.stopAllActions();\r\n        var scaleTo = cc.scaleTo(0.5,1,1);\r\n        this.node.runAction(scaleTo);\r\n        \r\n        this.m_TailLight.runAction(cc.scaleTo(0.5,0.6,0.6));\r\n    },\r\n    MoveOutScreen:function(){\r\n\r\n        this.node.stopAllActions();\r\n        this.node.runAction(cc.moveTo(0.5,cc.v2(this.node.x,980)));\r\n    },\r\n    BeginFire:function(){\r\n        this.m_Gun.BeginFire();\r\n        this.playSubWeapon();\r\n    },\r\n    EndFire:function(){\r\n        this.m_Gun.EndFire();\r\n        this.stopSubWeapon();\r\n    },\r\n\r\n    Resurgence:function(){\r\n        this.m_WuDi.active = true;\r\n        this.m_WuDi.opacity = 255;\r\n\r\n        var seq = cc.sequence(\r\n            cc.delayTime(3),\r\n            cc.fadeTo(0.2,255),\r\n            cc.fadeTo(0.2,0),\r\n            cc.fadeTo(0.2,255),\r\n            cc.fadeTo(0.2,0),\r\n            cc.fadeTo(0.2,255),\r\n            cc.fadeTo(0.2,0),\r\n            cc.fadeTo(0.2,255),\r\n            cc.fadeTo(0.2,0),\r\n            cc.callFunc(function(){\r\n                this.m_WuDi.opacity = 255;\r\n                this.m_WuDi.active = false;\r\n            }.bind(this))\r\n        );\r\n        this.m_WuDi.runAction(seq);\r\n    },\r\n    DieEnd:function(){\r\n\r\n        this.node.active = false;\r\n    },\r\n    MoveTo:function(time,pos){\r\n        this.node.stopAllActions();\r\n        this.node.runAction(cc.moveTo(time,pos))\r\n    },\r\n\r\n    ChangeAirPlane:function(index){\r\n        // cc.log('换图片'+index)\r\n        var frame = this.m_texture.getSpriteFrame('Jishen_W'+(index))        \r\n        if( frame != null){\r\n            this.m_Body.spriteFrame = frame;            \r\n        }\r\n\r\n        for (var i = 0; i < this.m_subWeapon.length; i++) {\r\n            this.m_subWeapon[i].node.active = false;\r\n        }\r\n        if( this.m_subWeapon[index] != null ){\r\n            this.m_subWeapon[index].node.active = true;\r\n        }else{\r\n            this.m_subWeapon[0].node.active = true;\r\n        }\r\n\r\n    },\r\n\r\n    stopSubWeapon:function(){\r\n        \r\n        for (var i = 0; i < this.m_subWeapon.length; i++) {\r\n            if(this.m_subWeapon[i].setStop && this.m_subWeapon[i].node.active ){\r\n                this.m_subWeapon[i].setStop();\r\n            }\r\n        }\r\n    },\r\n    playSubWeapon:function(){\r\n\r\n        for (var i = 0; i < this.m_subWeapon.length; i++) {\r\n            if(this.m_subWeapon[i].setStop && this.m_subWeapon[i].node.active ){\r\n                this.m_subWeapon[i].setStart();\r\n            }\r\n        }\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}